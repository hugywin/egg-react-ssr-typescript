{"version":3,"file":"static/js/Page.chunk.js","sources":["webpack:///./web/assets/common.scss?e615","/Users/zhushijie/Desktop/github/egg-react-ssr-typescript/web/decorator/MultipleRender.tsx","/Users/zhushijie/Desktop/github/egg-react-ssr-typescript/web/decorator/Route.tsx","webpack:///./web/layout/index.module.scss?3b7a","/Users/zhushijie/Desktop/github/egg-react-ssr-typescript/web/layout/index.tsx","webpack:///./web/page/index/index.module.scss?f9dd","/Users/zhushijie/Desktop/github/egg-react-ssr-typescript/web/page/index/index.tsx","/Users/zhushijie/Desktop/github/egg-react-ssr-typescript/web/page/news/index.module.scss","/Users/zhushijie/Desktop/github/egg-react-ssr-typescript/web/page/news/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1560061045329\n      var cssReload = require(\"!../../node_modules/_css-hot-loader@1.4.4@css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Switch, Route, StaticRouter, matchPath } from 'react-router-dom'\nimport { Context } from 'egg';\nimport { Layout } from '@/layout';\nimport { clientroutelist } from './Route';\n\nexport function MultipleRender() {\n\n    let routelist = clientroutelist;\n\n    return function (target) {\n        console.log('startup');\n        /**\n         * 客户端渲染方法\n         */\n        const clientRender = () => {\n            ReactDOM.hydrate(\n                <BrowserRouter>\n                    <Layout>\n                        {\n                            routelist.length > 0 ? (\n                                <Switch>\n                                    {\n                                        routelist.map((item, index) => {\n                                            let baseprops = (window as any).__INITIAL_DATA__;\n                                            return (\n                                                <Route key={index} path={item.routeUrl} render={(props) => React.createElement(item.component, Object.assign(baseprops, props))} />\n                                            )\n                                        })\n                                    }\n                                </Switch>\n                            )\n                                : React.createElement(target)\n                        }\n                    </Layout>\n                </BrowserRouter>,\n                document.getElementById('app') as HTMLElement\n            );\n\n            if (process.env.NODE_ENV === 'development' && module.hot) {\n                module.hot.accept()\n            }\n        }\n\n        /**\n         * 服务端渲染方法\n         * @param ctx \n         */\n        const serverRender = async (ctx: Context) => {\n\n\n            let component: any;\n            if (routelist.length > 0) {\n                component = routelist.findIndex(p => matchPath(ctx.path, p.routeUrl)) > -1 ? routelist.find(p => matchPath(ctx.path, p.routeUrl))!.component : target\n            }\n            else {\n                component = target;\n            }\n\n            const serverData = component!.getInitialProps ? await component.getInitialProps(ctx) : {}\n            ctx.serverData = serverData;\n\n            return (\n                <StaticRouter location={ctx.req.url} context={ctx.serverData}>\n                    <Layout>\n                        {\n                            React.createElement(component, serverData)\n                        }\n                    </Layout>\n                </StaticRouter>\n            );\n        }\n\n        /** 赋值给当前渲染原型对象上 */\n        Reflect.set(target, '$serverRender', serverRender);\n        /** 从装饰器中启动客户端渲染 */\n        if (__isBrowser__) {\n            clientRender();\n        }\n\n    }\n}","export const clientroutelist: ClientRouteInfo[] = [];\n\n/**\n * 页面路由注册组件\n * \n * @export\n * @param {string} path\n * @returns {Function}\n */\nexport function Route(path: string): Function {\n    console.log('register router');\n    let routelist = clientroutelist\n    return function (target: any) {\n        routelist.push({ routeUrl: path, component: target });\n    }\n\n}\n\n/**\n * 客户端路由信息\n *\n * @export\n * @interface ClientRouteInfo\n */\nexport interface ClientRouteInfo {\n\n    /**\n     * 页面组件\n     *\n     * @type {*}\n     * @memberof ClientRouteInfo\n     */\n    component: any;\n\n    /**\n     * 路由地址\n     *\n     * @type {string}\n     * @memberof RouteConfig\n     */\n    routeUrl: string;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title_3D7bQ\",\"author\":\"author_24Zab\"};\n    if(module.hot) {\n      // 1560061045001\n      var cssReload = require(\"!../../node_modules/_css-hot-loader@1.4.4@css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","import { Link } from 'react-router-dom';\nimport React from 'react';\nimport styles from './index.module.scss';\nimport '../assets/common.scss';\n\nexport class Layout extends React.PureComponent {\n\n    render(): JSX.Element {\n        return (\n            <div className=\"normal\">\n                <h1 className={styles.title}>\n                    <Link to='/'>Egg + React + SSR</Link>\n                    <div className={styles.author}>by ykfe</div>\n                </h1>\n                {this.props.children}\n            </div>\n        )\n    }\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"list_1DvMr\",\"toDetail\":\"toDetail_174Mj\"};\n    if(module.hot) {\n      // 1560061044913\n      var cssReload = require(\"!../../../node_modules/_css-hot-loader@1.4.4@css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","import { MultipleRender } from '../../decorator/MultipleRender';\nimport { Link } from 'react-router-dom'\nimport React from 'react';\nimport styles from './index.module.scss';\nimport { Context } from 'egg';\nimport { Route } from '@/decorator/Route';\nimport '@/page/news/index'\n\n\ninterface IPageProps {\n  news: any[];\n}\n\n@MultipleRender()\n@Route('/index')\nexport default class Page extends React.Component<IPageProps> {\n\n  static async getInitialProps(_ctx: Context): Promise<any> {\n    return Promise.resolve({\n      news: [\n        {\n          id: '1',\n          title: 'Racket v7.3 Release Notes'\n        },\n        {\n          id: '2',\n          title: 'Free Dropbox Accounts Now Only Sync to Three Devices'\n        },\n        {\n          id: '3',\n          title: 'Voynich Manuscript Decoded by Bristol Academic'\n        },\n        {\n          id: '4',\n          title: 'Burger King to Deliver Whoppers to LA Drivers Stuck in Traffic'\n        },\n        {\n          id: '5',\n          title: 'How much do YouTube celebrities charge to advertise your product? '\n        }\n      ]\n    })\n  }\n\n  constructor(props: IPageProps) {\n    super(props);\n  }\n\n  componentDidMount(): void {\n    console.log(123);\n  }\n\n  render(): JSX.Element {\n    return (\n      <div className=\"normal\">\n        <ul className={styles.list}>\n          {\n            this.props.news && this.props.news.map((item, index) => (\n              <li key={`news${index}`}>\n                <div>文章标题: {item.title}</div>\n                <div className='toDetail'><Link to={`/news/${item.id}`}>点击查看详情</Link></div>\n              </li>\n            ))\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\n\n\n\n\n\n\n","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1560061044909\n      var cssReload = require(\"!../../../node_modules/_css-hot-loader@1.4.4@css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Context } from 'egg';\nimport { Route } from '@/decorator/Route';\nimport './index.module.scss';\n\ninterface INewsProps {\n    newsDetail: string;\n}\n\n@withRouter\n@Route('/news/:id')\nexport default class News extends React.PureComponent<INewsProps> {\n\n    static async getInitialProps(ctx: Context): Promise<any> {\n        const mockData = {\n            '1': `Racket-on-Chez continues to improve. Snapshot builds are currently available at pre.racket-lang.org, and we expect that Racket-on-Chez will be included as a download option in the next release.`,\n            '2': `This means anyone with more than three devices connected doesn't have to worry right this instant. That will change, however, when it comes time to replace one of your current devices or if you add another device to your collection. At that point, you will have to make a decision.`,\n            '3': `World's most mysterious text is finally cracked: Bristol academic deciphers lost language of 600-year-old Voynich manuscript to reveal astrological sex tips, herbal remedies and other pagan beliefs`,\n            '4': `After a successful test in Mexico City, fast-food chain Burger King will begin delivering food to drivers caught in traffic in Los Angeles in what they have dubbed The Traffic Jam Whopper.`,\n            '5': `Product advertisement and promotion on YouTube is a function of the dedicated audience (or influence) of the individual (influencer) anchoring the advertising or promotion.`\n        }\n        const newsId = __isBrowser__ ? ctx.match.params.id : ctx.params.id\n        return Promise.resolve({\n            newsDetail: mockData[newsId]\n        })\n    }\n\n\n    render(): JSX.Element {\n        return (\n            <div className='news-container' >\n                文章详情: {this.props.newsDetail}\n            </div>\n        )\n    }\n}"],"mappings":";;;;;;;;;AAAA;AACA,gCAKA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;;;;AAGA;AACA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAUA,mBAEA;AACA;AAEA;;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAWA;AACA;AAZA;AAeA;AAAA;AAAA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAyBA;AACA;AACA;AADA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAEA;;;;;;;;AAOA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;;;;;;;;;;;;;;;;AClBA;AACA;AACA,gCAKA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;AAZA;AACA;AADA;AAAA;;;;;;;;;;;ACLA;AACA;AACA,gCAKA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AAEA;AACA;AASA;;;;;;;;;;AAEA;;;;;AACA;AACA;AAEA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAlBA;AACA;;;;;;;;;;;;;;;;;AAyBA;AAAA;AACA;AADA;AAEA;AACA;;;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAHA;AAUA;;;;AApDA;;;;;;;;;;;;ACfA;AACA,gCAKA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AAEA;AACA;AAQA;;;;;;;;;;;;;AAiBA;AACA;AACA;AAAA;AAIA;;;;;;AArBA;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;;AAZA;;;;;A","sourceRoot":""}